{"version":3,"file":"index.js","sources":["../src/constants.ts","../src/compound-date.ts","../src/database.ts","../src/v2/database.ts"],"sourcesContent":["\nexport class Constants {\n  public static TIAN_GAN = ['甲', '乙', '丙', '丁', '戊', '己', '庚', '辛', '壬', '癸'];\n  public static DI_ZHI =   ['子', '丑', '寅', '卯', '辰', '巳', '午', '未', '申', '酉', '戌', '亥'];\n  public static ZODIAC =   [\"鼠\", \"牛\", \"虎\", \"兔\", \"龍\", \"蛇\", \"馬\", \"羊\", \"猴\", \"雞\", \"狗\", \"豬\"];\n  public static GAN_ZHI = [\n    '甲子', '乙丑', '丙寅', '丁卯', '戊辰', '己巳', '庚午', '辛未', '壬申', '癸酉',\n    '甲戌', '乙亥', '丙子', '丁丑', '戊寅', '己卯', '庚辰', '辛巳', '壬午', '癸未',\n    '甲申', '乙酉', '丙戌', '丁亥', '戊子', '己丑', '庚寅', '辛卯', '壬辰', '癸巳',\n    '甲午', '乙未', '丙申', '丁酉', '戊戌', '己亥', '庚子', '辛丑', '壬寅', '癸卯',\n    '甲辰', '乙巳', '丙午', '丁未', '戊申', '己酉', '庚戌', '辛亥', '壬子', '癸丑',\n    '甲寅', '乙卯', '丙辰', '丁巳', '戊午', '己未', '庚申', '辛酉', '壬戌', '癸亥',\n  ];\n  public static LUNAR_MONTHS = ['正月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月'];\n  public static LUNAR_MONTHS_ALIAS = ['正月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '冬月', '腊月'];\n  public static LUNAR_DATES =  [\n    '初一', '初二', '初三', '初四', '初五', '初六', '初七', '初八', '初九', '初十',\n    '十一', '十二', '十三', '十四', '十五', '十六', '十七', '十八', '十九', '二十',\n    '廿一', '廿二', '廿三', '廿四', '廿五', '廿六', '廿七', '廿八', '廿九', '三十',\n  ];\n  public static JIE_QI = [\n    '立春', '雨水', '惊蛰', '春分', '清明', '谷雨', '立夏', '小满', '芒种', '夏至', '小暑', '大暑',\n    '立秋', '处暑', '白露', '秋分', '寒露', '霜降', '立冬', '小雪', '大雪', '冬至', '小寒', '大寒',\n  ];\n}\n","import { Constants } from './constants';\n\n/**\n * 包含公历和农历数据的类型\n *\n * @author 鸿则 <hungtcs@163.com>\n * @date 2020-12-16\n * @export\n * @class CompoundDate\n */\nexport class CompoundDate {\n\n  constructor(\n      public year: number,\n      public month: number,\n      public date: number,\n      public tiangan: number,\n      public dizhi: number,\n      public lunarMonth: number,\n      public lunarDate: number,\n      public leap: boolean,\n      public solarTerm: number) {\n\n  }\n\n  public getDate() {\n    const date = new Date(0);\n    return (\n      date.setFullYear(this.year),\n      date.setMonth(this.month - 1),\n      date.setDate(this.date),\n      date\n    );\n  }\n\n  public toString(format?: 'gregorian'|'lunar') {\n    if(format === 'gregorian') {\n      return `${ this.year }年${ this.month.toString().padStart(2) }月${ this.date.toString().padStart(2) }日`;\n    }\n    else if(format === 'lunar') {\n      return `${ Constants.TIAN_GAN[this.tiangan] }${ Constants.DI_ZHI[this.dizhi] }`+\n             `${ Constants.ZODIAC[this.dizhi] }年 ${ Constants.LUNAR_MONTHS_ALIAS[this.lunarMonth - 1] }`+\n             `${ Constants.LUNAR_DATES[this.lunarDate - 1] }`+\n             `${ this.solarTerm ? ` ${ Constants.JIE_QI[this.solarTerm - 1] }` : '' }`;\n    }\n    else {\n      return `公历 ${ this.year }年${ this.month.toString().padStart(2) }月${ this.date.toString().padStart(2) }日 ` +\n             `农历 ${ Constants.TIAN_GAN[this.tiangan] }${ Constants.DI_ZHI[this.dizhi] }`+\n             `${ Constants.ZODIAC[this.dizhi] }年 ${ this.leap ? '閏' : '' }${ Constants.LUNAR_MONTHS_ALIAS[this.lunarMonth-1] }`+\n             `${ Constants.LUNAR_DATES[this.lunarDate-1] }`+\n             `${ this.solarTerm ? ` ${ Constants.JIE_QI[this.solarTerm - 1] }` : '' }`;\n    }\n  }\n\n}\n","import { CompoundDate } from \"./compound-date\";\nimport { FindCondition } from \"./find-condition\";\n\nexport interface DatabaseLoadOptions {\n  parseAll?: boolean;\n}\n\nexport class Database {\n  public loaded: boolean = false;\n  protected _arrayBuffer: ArrayBuffer | null = null;\n  protected compoundDates: Array<CompoundDate> = [];\n\n  protected get arrayBuffer() {\n    if(this.loaded) {\n      return this._arrayBuffer;\n    } else {\n      throw new Error('please call load function before getting buffer');\n    }\n  };\n  protected set arrayBuffer(buffer) { this._arrayBuffer = buffer; }\n\n  public async load(binary?: string, options: DatabaseLoadOptions = {}): Promise<ArrayBuffer> {\n    const isNodeJS = typeof process !== 'undefined' && process.versions != null && process.versions.node != null;\n    let arrayBuffer: ArrayBuffer;\n    if(isNodeJS) {\n      const fs = require('fs');\n      const path = require('path');\n      const buffer: Buffer = await fs.promises.readFile(binary ?? path.join(__dirname, '../database/all.bin'));\n      arrayBuffer = new ArrayBuffer(buffer.length);\n      const view = new Uint8Array(arrayBuffer);\n      for(let i = 0, length = buffer.length; i < length; i++) {\n        view[i] = buffer[i];\n      }\n    } else {\n      const response = await fetch(binary ?? 'all.bin')\n      arrayBuffer = await response.arrayBuffer();\n    }\n    this.arrayBuffer = arrayBuffer;\n    this.loaded = true;\n    options.parseAll && this.parseAll();\n    return arrayBuffer;\n  }\n\n  public getCompoundDate(year: number, month: number, date: number) {\n    const offset = (new Date(year, month - 1, date).getTime() - new Date(1901, 0, 1).getTime()) / (1000 * 60 * 60 * 24) * 5;\n    return this.slice(offset);\n  }\n\n  public find(condition: FindCondition | ((date: CompoundDate) => boolean)) {\n    if(typeof(condition) === 'function') {\n      return this.compoundDates.filter(date => condition(date));\n    } else {\n      return this.compoundDates.filter(date => {\n        return Array.from(Object.entries(condition)).every(([key, value]) => date[key] === value);\n      });\n    }\n  }\n\n  protected slice(offset: number) {\n    const dataView = new DataView(this.arrayBuffer, offset, 5);\n    const [byte0, byte1, byte2, byte3, byte4] = [dataView.getUint8(0), dataView.getUint8(1), dataView.getUint8(2), dataView.getUint8(3), dataView.getUint8(4)];\n    return new CompoundDate(\n      byte0 + 1900,\n      byte1 >>> 4,\n      ((byte1 & 0x0F) << 1) + (byte2 >>> 7),\n      ((byte2 >>> 3) & 0x0F),\n      ((byte2 << 1) & 0x0F) + (byte3 >>> 7),\n      (byte3 & 0x7F) >>> 3,\n      ((byte3 & 0x07) << 2) + (byte4 >>> 6),\n      ((byte4 >>> 5) & 0x01) === 0x01,\n      byte4 & 0x1F,\n    );\n  }\n\n  public parseAll() {\n    this.compoundDates.length = 0;\n    for(let i = 0, length = this.arrayBuffer.byteLength; i < length; i += 5) {\n      this.compoundDates.push(this.slice(i));\n    }\n  }\n\n}\n","import { Constants } from \"src/constants\";\nimport { CompoundDate } from \"../compound-date\";\nimport { DatabaseLoadOptions, Database as DatabaseV1 } from \"../database\";\n\nexport class Database extends DatabaseV1 {\n  private dates = [];\n\n  public async load(binary?: string, options: DatabaseLoadOptions = { parseAll: true }): Promise<ArrayBuffer> {\n    const isNodeJS = typeof process !== 'undefined' && process.versions != null && process.versions.node != null;\n    if(isNodeJS) {\n      const path = require('path');\n      return super.load(binary ?? path.join(__dirname, '../database/all-v2.bin'), options);\n    } else {\n      return super.load(binary, options);\n    }\n  }\n\n  public getCompoundDate(year: number, month: number, date: number) {\n    const offset = (new Date(year, month - 1, date).getTime() - new Date(1901, 0, 1).getTime()) / (1000 * 60 * 60 * 24) * 5;\n    return this.slice(offset);\n  }\n\n  public parseAll() {\n    // 节气\n    console.log(this.arrayBuffer);\n\n    const yJieqiLength = (1 + 3 * 24);\n    for(let yi = 0, length = 200;  yi < length; yi++) {\n      const dataView = new DataView(this.arrayBuffer);\n\n      const yearJieqiIndex = yi * yJieqiLength;\n      const gan = dataView.getUint8(yearJieqiIndex) >>> 4;\n      const zhi = dataView.getUint8(yearJieqiIndex) & 0x0F;\n\n      console.log(Constants.TIAN_GAN[gan], Constants.DI_ZHI[zhi]);\n\n      for(let jqIndex =0, length = 24; jqIndex < length; jqIndex++) {\n        const jieqiIndex = yearJieqiIndex + 1 + jqIndex * 3;\n        const year = dataView.getUint8(jieqiIndex);\n        const month = dataView.getUint8(jieqiIndex+1);\n        const date = dataView.getUint8(jieqiIndex+2);\n        console.log(Constants.JIE_QI[jqIndex], year, month, date);\n      }\n\n\n\n    }\n  }\n\n}\n"],"names":["Database","DatabaseV1"],"mappings":"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"}